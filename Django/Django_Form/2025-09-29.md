## HTML â€˜formâ€™

- ì§€ê¸ˆê¹Œì§€ ì‚¬ìš©ìë¡œë¶€í„° ë°ì´í„°ë¥¼ ì œì¶œ ë°›ê¸°ìœ„í•´ í™œìš©í•œ ë°©ë²•.
- ê·¸ëŸ¬ë‚˜ ë¹„ì •ìƒì  í˜¹ì€ ì•…ì˜ì ì¸ ìš”ì²­ì„ í•„í„°ë§ í•  ìˆ˜ ì—†ë‹¤
    
    

 ìœ íš¨í•œ ë°ì´í„°ì¸ì§€ì— ëŒ€í•œ í™•ì¸ì´ í•„ìš”í•˜ë‹¤ !

<aside>
ğŸ’¡

ìœ íš¨ì„± ê²€ì‚¬

- ìˆ˜ì§‘í•œ ë°ì´í„°ê°€ ì •í™•í•˜ê³  ìœ íš¨í•œì§€ í™•ì¸í•˜ëŠ” ê³¼ì •

ìœ íš¨ì„± ê²€ì‚¬ êµ¬í˜„ì€ ì–´ë ¤ì›€

- ìœ íš¨ì„± ê²€ì‚¬ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” ì…ë ¥ ê°’, í˜•ì‹, ì¤‘ë³µ, ë²”ìœ„, ë³´ì•ˆ ë“± ë§ì€ ê²ƒë“¤ì„ ê³ ë ¤í•´ì•¼ í•¨
- ì´ëŸ° ê³¼ì •ê³¼ ê¸°ëŠ¥ì„ ì§ì ‘ ê°œë°œí•˜ëŠ” ê²ƒì´ ì•„ë‹Œ Djangoê°€ ì œê³µí•˜ëŠ” Formì„ ì‚¬ìš©

â†’ Django Formì´ ìë™ìœ¼ë¡œ ì˜¬ë°”ë¥¸ í˜•ì‹ì¸ì§€ ì ê²€í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•¨

</aside>

## Form Class

### Django Form(Form classë¥¼ ìƒì†ë°›ì•„ ì‚¬ìš©í•œë‹¤!)

- ì‚¬ìš©ì ì…ë ¥ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³ , ì²˜ë¦¬ ë° ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ë„êµ¬
- ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ë‹¨ìˆœí™”, ìë™í™” í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µ
- ì‚¬ìš©ìê°€ ì˜ëª» ì…ë ¥í•œ ë°ì´í„°ëŠ” ìë™ìœ¼ë¡œ ì˜¤ë¥˜ë¡œ ì²˜ë¦¬ë˜ì–´ ì•ˆì „ì„±ì„ ë†’ìŒ
- ê°œë°œìëŠ” ì´ë¥¼ í†µí•´ ë¹ ë¥´ê³  ì¼ê´€ëœ ì…ë ¥ ê²€ì¦ ê¸°ëŠ¥ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŒ

```python
# forms.py ìƒì„± 
class ArticleForm(forms.Form):
    title = forms.CharField(max_length=10) # modelsì™€ ì´ë¦„ë§Œ ê°™ì„ ë¿ ë‹¤ë¥¸ í´ë˜ìŠ¤ì„ 
    content = forms.CharFiel) # formsì—ëŠ” TextFieldê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤
```

```python
# articles/views.py
from .forms import ArticleForm

def new(request):
    """ìƒˆë¡œìš´ ê²Œì‹œê¸€ì„ ì‘ì„±í•  ìˆ˜ ìˆëŠ” new.html í˜ì´ì§€ë¥¼ ë Œë”ë§"""
    # ì‚¬ìš©ìê°€ ë°ì´í„°ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆëŠ” ë¹ˆ form í˜ì´ì§€ë¥¼ ë³´ì—¬ì£¼ëŠ” ì—­í• ë§Œ í•¨
    form = ArticleForm()
    context = {
        'form': form,
    }
    return render(request, 'articles/new.html', context)
```

```html
<!-- articles/new.html -->

<h1>NEW</h1>
<form action="{% url 'articles:create' %}" method="POST">
	{% csrf token %}
	{{ form }}
	<input type="submit">
</form>
```

- HTMLì˜ formì„ ì•„ì˜ˆ ëŒ€ì²´ í•˜ëŠ” ê²Œ ì•„ë‹Œ, ê·¸ ì•ˆì— ìˆëŠ” inputì„ ëŒ€ì²´í•¨

### Widgets

- forms.pyì—ì„œ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•  ë•Œ, contentê°€ Textareaì„ì„ í‘œí˜„í•´ì•¼ í•˜ëŠ”ë°,,, formsì—ëŠ” ì—†ì—ˆìŒ
    - Widgetsìœ¼ë¡œ í‘œí˜„ !!
- HTML â€˜inputâ€™ elementì˜ í‘œí˜„ì„ ë‹´ë‹¹

```python
# forms.py ìƒì„± 
class ArticleForm(forms.Form):
    title = forms.CharField(max_length=10) # modelsì™€ ì´ë¦„ë§Œ ê°™ì„ ë¿ ë‹¤ë¥¸ í´ë˜ìŠ¤ì„ 
    content = forms.CharField(widget=forms.Textarea) 
```

### Django ModelForm

- **Form VS ModelForm**
    - Form: ì‚¬ìš©ì ì…ë ¥ ë°ì´í„°ë¥¼ DBì— ì €ì¥í•˜ì§€ ì•Šì„ ë•Œ
        - ê²€ìƒ‰, ë¡œê·¸ì¸
    - ModelForm: ì‚¬ìš©ì ì…ë ¥ ë°ì´í„°ë¥¼ DBì— ì €ì¥í•´ì•¼ í•  ë•Œ
        - ê²Œì‹œê¸€ ì‘ì„±, íšŒì›ê°€ì…

ìš°ì›” ê´€ê³„ê°€ ì•„ë‹ˆë¼ ìš©ë„ê°€ ì„œë¡œ ë‹¤ë¥¸ ê²ƒ

### ModelForm

- Modelê³¼ ì—°ê²°ëœ Formì„ ìë™ìœ¼ë¡œ ìƒì„±í•´ì£¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
    - Formí´ë˜ìŠ¤ì™€ Modelí´ë˜ìŠ¤ë¥¼ ê²°í•©í•œ í˜•íƒœë¡œ, ëª¨ë¸ í•„ë“œ(models.pyì— ìˆëŠ”)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì…ë ¥ í¼ì„ ìë™ ìƒì„±í•´ì¤€ë‹¤
    - ì¦‰, ë°ì´í„° ìˆ˜ì§‘ê³¼ ì €ì¥ ê³¼ì •ì„ ë™ì‹œì— ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤Œ!

```python
from django import forms
from .models import Article

class ArticleForm(forms.ModelForm):
    class Meta: # ë©”íƒ€ë°ì´í„°: ë°ì´í„°ì— ëŒ€í•œ ë°ì´í„°, ì¦‰ ì¶”ê°€ ì •ë³´ë¥¼ ì ìŒ 
        model = Article
        fields = '__all__'
```

- models.pyì—ì„œ ì •ì˜í•œ ëª¨ë¸ë§Œ ì£¼ì—ˆì„ ë¿ì¸ë° title, content, widget ë“± ë‹¤ ì ìš©ì´ ìë™ìœ¼ë¡œ ë¨
- class Meta..?
    - ModelFormì˜ ì •ë³´ë¥¼ ì‘ì„±í•˜ëŠ” ê³³
        - ModelForm ë‚´ë¶€ì—ì„œ ì–´ë–¤ ëª¨ë¸ê³¼ ì—°ê²°í• ì§€, ì–´ë–¤ í•„ë“œë¥¼ ì‚¬ìš©í• ì§€ ë“±ì„ ì •ì˜í•˜ëŠ” ì„¤ì • ê³µê°„
        - fields ë° exclude ì†ì„±(on off ê°œë…ì´ë¼ê³  ìƒê°í•˜ë©´ ë¨)
            - `fields = '__all__'` : ëª¨ë‘ ì‚¬ìš©
            - `fields = ('title',)` : title ë§Œ ì‚¬ìš©
            - `exclude = ('title',)` : title ë§Œ ì œì™¸
    - ì£¼ì˜ì‚¬í•­
        - íŒŒì´ì¬ì˜ inner classì™€ ê°™ì€ ë¬¸ë²•ì ì¸ ê´€ì ìœ¼ë¡œ ì ‘ê·¼í•˜ì§€ ë§ ê²ƒ

### ModelForm ì ìš©

```python
# articles/views.py

from .forms import ArticleForm

def create(request):
		form = ArticleForm(request.POST)
		if form.is_valid():
				article = form.save()
				return redirect('articles:detail', article.pk) # urlì„ ë¶€ë¦„
		context = {
				'form' : form,
		}
		return render(request, 'articles/new.html', context) # htmlì„ ë¶€ë¦„ 
```

- ê³µë°± ë°ì´í„°ê°€ ìœ íš¨í•˜ì§€ ì•Šì€ ì´ìœ ì™€ ì—ëŸ¬ë©”ì‹œì§€ê°€ ì¶œë ¥ë˜ëŠ” ê³¼ì •
    - ë³„ë„ë¡œ ëª…ì‹œí•˜ì§€ ì•Šì•˜ì§€ë§Œ ëª¨ë¸ í•„ë“œì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë¹ˆ ê°’ì€ í—ˆìš©í•˜ì§€ ì•ŠëŠ” ì œì•½ì¡°ê±´ì´ ì„¤ì •ë¨
    - ë¹ˆ ê°’ì€ `is_valid()`ì— ì˜í•´ Falseë¡œ í‰ê°€ë˜ê³  form ê°ì²´ì—ëŠ” ê·¸ì— ë§ëŠ” ì—ëŸ¬ ë©”ì„¸ì§€ê°€ í¬í•¨ë˜ì–´ ë‹¤ìŒ ì½”ë“œë¡œ ì§„í–‰ë¨

### ModelFormì„ ì ìš© edit ë¡œì§

```python
# views.py
def edit(request, pk):
    """ê¸°ì¡´ ê²Œì‹œê¸€ì„ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” edit.html í˜ì´ì§€ë¥¼ ë Œë”ë§"""
    # 1. ìˆ˜ì •í•  ê²Œì‹œê¸€ì˜ ê¸°ì¡´ ë°ì´í„°ë¥¼ pkë¥¼ ì´ìš©í•´ ì¡°íšŒ
    article = Article.objects.get(pk=pk)
    form = ArticleForm(instance=article) # ìˆ˜ì •í• ë•Œ ì›ë˜ ë°ì´í„° í‘œì‹œí•´ì£¼ëŠ”ê±´ instanceì— ì „ë‹¬í•˜ê¸°!

    # 2. ì¡°íšŒëœ ë°ì´í„°ë¥¼ formì— ë¯¸ë¦¬ ì±„ì›Œë„£ê¸° ìœ„í•´ contextì— ë‹´ì•„ í…œí”Œë¦¿ì— ì „ë‹¬
    context = {
        'article': article,
        'form': form,
    }
    # 3. edit.html í…œí”Œë¦¿ì„ ë Œë”ë§
    return render(request, 'articles/edit.html', context)
```

```html
<!-- articles/edit.html -->

<h1>EDIT</h1>
<form action="{% url 'articles:update' article.pk %}" method="POST">
	{% csrf_token %}
	{{ form }}
	<input type="submit">
</form>
```

### ModelFormì„ ì ìš©í•œ update ë¡œì§

```python
# articles/views.py

def update(request, pk):
    """ì‚¬ìš©ìê°€ formì„ í†µí•´ ì œì¶œí•œ ìˆ˜ì • ë°ì´í„°ë¥¼ DBì— ë°˜ì˜(UPDATE)"""
    # 1. ìˆ˜ì •í•  ê²Œì‹œê¸€ì„ pkë¥¼ ì´ìš©í•´ ì¡°íšŒ
    article = Article.objects.get(pk=pk)
    # 2. ì‚¬ìš©ìê°€ ì…ë ¥í•œ(ìˆ˜ì •í•œ) ë°ì´í„°ë¥¼ í†µì§¸ë¡œ ë°›ìŒ + ê¸°ì¡´ ë°ì´í„°ë¥¼ ë„£ì–´ì¤˜ì•¼ saveë©”ì„œë“œê°€ ê°±ì‹ ë¡œì§ì„ ì§„í–‰í•¨
    form = ArticleForm(request.POST, instance=article) # instanceê°€ ì—†ìœ¼ë©´ saveë©”ì„œë“œê°€ ìƒì„±ë¡œì§ìœ¼ë¡œ ì¸ì‹í•´ì„œ ë°ì´í„°ë¥¼ ìƒì„±í•¨ 

    # 3. ìœ íš¨ì„±ê²€ì‚¬
    if form.is_valid():
        # 3.1 ê²€ì‚¬ í†µê³¼ í–ˆì„ ë•Œ
        form.save()
        return redirect('articles:detail', article.pk)
    # 3.2 ê²€ì‚¬ í†µê³¼ ëª»í–ˆì„ ë•Œ
    context = {
        'article': article,
        'form': form, 
    }
    return render(request, 'articles/edit.html', context)
```

### save ë©”ì„œë“œ

- ë°ì´í„°ë² ì´ìŠ¤ ê°ì²´ë¥¼ ë§Œë“¤ê³  ì €ì¥í•˜ëŠ” ModelFormì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ
- íŠ¹ì§•
    - í¼ ë°ì´í„°ê°€ ìœ íš¨í•œ ê²½ìš°, save() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ëª¨ë¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ë¨
    - instance ì¸ìë¥¼ í†µí•´ ìƒˆ ê°ì²´ ìƒì„±ê³¼ ê¸°ì¡´ ê°ì²´ ìˆ˜ì •ì„ êµ¬ë¶„
    
    ```python
    # CREATE
    
    form = ArticleForm(request.POST)
    form.save()
    ```
    
    ```python
    # UPDATE
    
    form = ArticleForm(request.POST, instance=article)
    form.save()
    ```
    
    - ì´ ê³¼ì •ì„ í†µí•´ ì½”ë“œ ì—†ì´ ì†ì‰½ê²Œ DB ì—°ë™ ê°€ëŠ¥

## View í•¨ìˆ˜ êµ¬ì¡° ë³€í™”

### new & create view í•¨ìˆ˜ê°„ ê³µí†µì ê³¼ ì°¨ì´ì 

- ê³µí†µì 
    - â€œë°ì´í„° ìƒì„±ì„ êµ¬í˜„í•˜ê¸° ìœ„í•¨â€
- ì°¨ì´ì 
    - â€œnewëŠ” GET method ìš”ì²­ë§Œì„, createëŠ” POST method ìš”ì²­ë§Œì„ ì²˜ë¦¬â€

### HTTP request method ì°¨ì´ì ì„ í™œìš©í•´ ë™ì¼í•œ ëª©ì ì„ ê°€ì§€ëŠ” 2ê°œì˜ view í•¨ìˆ˜ë¥¼ í•˜ë‚˜ë¡œ êµ¬ì¡°í™”

```python
def new(request):
		form = ArticleForm()
		context = {
				'form': form,
		}
		return render(request, 'articles/new.html', context)
```

```python
def create(request):
		form = ArticleForm(request.POST)
		if form.is_valid():
				article = form.save()
				return redirect('articles:detail', article.pk)
		
		context = {
				'form': form,
		}
		return render(request, 'articles/new.html', context)
```

ë‘ê°œë¥¼ í•©ì¹˜ë©´?

```python
def create(request):
		if request.method == 'POST':
				form = ArticleForm(request.POST)
				if form.is_valid():
						article = form.save()
						return redirect('articles:detail', article.pk)
		else:
				form = ArticleForm()
		context = {
				'form': form,
		}		
		return render(request, 'articles/new.html', context)
```

ê·¸ëŸ¼ ì´ì œ new urlì„ ì‚¬ìš©í•˜ì§€ ì•Šê²Œ ë˜ì—ˆìœ¼ë‹ˆ new url ì œê±° 

html íŒŒì¼ì—ì„œ new ê´€ë ¨ í‚¤ì›Œë“œë¥¼ createë¡œ ë³€ê²½(createí•˜ë‚˜ë¡œ í•©ì³¤ê¸° ë•Œë¬¸) 

### ê¸°ì¡´ editê³¼ update view í•¨ìˆ˜ ê²°í•©

- ìœ„ì™€ ìœ ì‚¬í•¨
```python
def update(request, pk):
		article = Article.objects.get(pk=pk)
		if request.method == 'POST':
				form = ArticleForm(request.POST, instance=article)
				if form.is_valid():
						form.save()
						return redirect('articles:detail', article.pk)
		else:
				form = ArticleForm(instance=article)
		context = {
				'article' : article,
				'form': form,
		}
		return render(request, 'articles/update.html', context)
```