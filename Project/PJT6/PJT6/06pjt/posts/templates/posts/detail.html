{% extends "base.html" %}

{% block content %}
  <h1>게시글 상세</h1>
  <h2>{{ post.pk }} 번째 글</h2>
  
  {% if request.user == post.user %}
  <div class="d-flex flex-row gap-3">
    <form action="{% url "posts:update" post.pk %}">
      {% csrf_token %}
      <input class="btn btn-dark" type="submit" value="게시글 수정하기">
    </form>
    <form action="{% url "posts:delete" post.pk %}" method="POST">
      {% csrf_token %}
      <input class="btn btn-danger" type="submit" value="게시글 삭제하기">
    </form>
  </div>
  {% endif %}
  
  <hr>
  <p>작성자 : {{ post.user }}</p>
  <p>제목: {{ post.title }}</p>
  <p>내용: {{ post.content }}</p>
  <p>작성일: {{ post.created_at }}</p>
  <p>수정일: {{ post.updated_at }}</p>
  

  <hr>

  {% comment %} 댓글 목록 {% endcomment %}
  <strong>댓글 {{ comments|length }}개</strong>
  <ul>
  {% for comment in comments %}
    <li>
      {{ comment.user }} - {{ comment.content }}
      {% if request.user == comment.user %}
        <form action="{% url "posts:comments_delete" post.pk comment.pk %}" method="POST">
          {% csrf_token %}
          <input class="btn btn-danger btn-sm" type="submit" value="삭제">
        </form>
      {% endif %}
    </li>
  {% endfor %}
  </ul>

  <hr>
  {% comment %} 댓글 작성 Form {% endcomment %}
  <form action="{% url "posts:comments_create" post.pk %}" method="POST">
    {% csrf_token %}
    {{ comment_form.as_p }}
    <input class="btn btn-dark" type="submit" value="댓글 작성하기">
  </form>

{% endblock content %}

